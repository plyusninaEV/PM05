# Генератор случайных чисел

Очень часто в программах возникает необходимость использования случайных чисел - от заполнения массива до криптографии. Для получения последовательности случайных чисел в языке C# имеется класс Random. Этот класс предусматривает два конструктора:

- Random() - инициализирует экземпляр класса Random с помощью начального значения, зависящего от текущего времени. Как известно, время может быть представлено в тиках - 100-наносекундных импульсах, начиная с 1 января 0001 года. И значение времени в тиках представляет собой 64-битное целое число, которое и будет использоваться для инициализации экземпляра генератора случайных чисел.
- Random(Int32) - инициализирует экземпляр класса Random с помощью указанного начального значения. Такая инициализация генератора случайных чисел может быть удобна на этапе отладки программы, поскольку в этом случае при каждом запуске программы будут генерироваться одни и те же "случайные" числа.

Основным методом данного класса является метод **Next()**, позволяющий получить случайное число и имеющий ряд перегрузок:

- Next() - возвращает случайное целое неотрицательное число формата Int32.
- Next(Int32) - возвращает случайное целое неотрицательное число, которое меньше указанного значения.
- Next(Int32 min, Int32 max) - возвращает случайное целое число в указанном диапазоне. При этом должно соблюдаться условие min<max (первый аргумент должен быть меньше второго). 

А также методы

- NextBytes(Byte[]) - заполняет элементы указанного массива байтов случайными числами.
- NextDouble() - возвращает случайное число с плавающей запятой, в диапазоне [0,0; 1,0). 

## Генерация числа заданной длины
Начнем с генерации числа определенной разрядности. Скажем, к примеру, нам нужно сгенерировать число длиной в 5 символов. Мы можем использовать метод Random.Next с указанием диапазона, к примеру:

Random random = new Random();
random.Next(10000, 99999);

Но если нам каждый раз необходимо генерировать числа различной разрядности, то указанный вариант не очень подходит.
Для решения данной задачи создадим метод, который в качестве параметра будет принимать разрядность возвращаемого числа:
```
public static int RandomInt(int size)
{
    Random random = new Random();
    int result = 0;
    for (int i = 0; i < size; i++)
    {
        //Генерируем число от 0 до 9, заполняем им разряд.
        result = (int)((result * 10) + (random.NextDouble() * 9));

        //Целое число не может начинаться с 0, если его разрядность больше 1
        if (size > 1 && result == 0)
            result++;
    }
    return result;
}
```
Вызов данного метода:

`Console.WriteLine("RandomInt(5): {0}", RandomInt(5));`

даст, например, такой результат:
RandomInt(5): 73842

Язык С# предоставляет большие возможности для генерации случайных величин. Если вам нужно получить генерацию целых или дробных чисел, то можно это сделать следующим образом:

### Генерация целых случайных чисел

C# имеет 3 перегруженных метода:

1. Возвращает значение большее нуля. Максимальное число больше 10 миллионов:
```
Random x = new Random(); // объявление переменной для генерации чисел
int n = x.Next();
```
2. Возвращает значение имеющееся в промежутке (min,max). При этом min значение входит в случайное число, а max не входит:

`int n= x.Next(-100,100);`

3. Возвращает целое положительное число не больше максимального:

`int n = x.Next(10);`

При этом максимальное число также не входит в генерацию случайных чисел, то есть в данном случае от 0 до 9.

 
### Генерация дробных случайных чисел

В языке C# методов для генерации дробных чисел, но это не проблема, так как если нам надо получить дробные числа, мы можем сделать это следующим образом:

`double r = Convert.ToDouble(x.Next(-100, 100)/10.0);`

В данном случае мы имеем числа от -10 до 9.9.

Также само, к примеру иметь положительные дробные числа:

`double r = Convert.ToDouble(x.Next(100)/10.0);`

В данном случае мы имеем генерацию от 0 до 9.9.


## Генерация строки заданной длины
Для генерации строки заданной длины немного изменим наш метод RandomInt():
```
public static string RandomString(int size)
{
    StringBuilder builder = new StringBuilder();
    Random random = new Random();
    char ch;
    for (int i = 0; i < size; i++)
    {
        //Генерируем число являющееся латинским символом в юникоде
        ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
        //Конструируем строку со случайно сгенерированными символами
        builder.Append(ch);
    }
    return builder.ToString();
}
```
Вызов данного метода:

Console.WriteLine("RandomString(5): {0}", RandomString(5));

даст, например, такой результат:
RandomString(5): HDYFN

[Генерация случайного имени пользователя длиной до 3 цифр иногда ставит 4 цифры](https://reddeveloper.ru/questions/c-generatsiya-sluchainogo-imeni-pol-zovatelya-dlinoi-do-3-tsifr-inogda-stavit-4-tsifry-x1qMa)
