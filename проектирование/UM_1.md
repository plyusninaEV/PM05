# Использование системного анализа и методологий проектирования (например, унифицированного языка моделирования (Unified Modelling Language), программной платформы MVC (Model-View-Control), фреймворков, шаблонов проектирования)

В UML определено восемь видов диаграмм:
- диаграмма прецедентов (Use case diagram) - диаграмма поведения, на которой показано множество прецедентов и актеров, а также отношения между ними;
- диаграмма деятельности (Activity diagram) - диаграмма поведения, на которой показан автомат и подчеркнуты переходы потока управления от одной деятельности к другой;
- диаграмма классов (Class diagram) - структурная диаграмма, на которой показано множество классов, интерфейсов, коопераций и отношения между ними;
- диаграмма состояний (Statechart diagram) - диаграмма поведения, на которой показан автомат и подчеркнуто поведение объектов с точки зрения порядка получения событий;
- диаграмма последовательностей (Sequence diagram) - диаграмма поведения, на которой показано взаимодействие и подчеркнута временная последовательность событий;
- диаграмма кооперации (Collaboration diagram) - диаграмма поведения, на которой показано взаимодействие и подчеркнута структурная организация объектов, посылающих и принимающих сообщения;
- диаграмма компонентов (Component diagram) - диаграмма поведения, на которой показан автомат и подчеркнуто поведение объектов с точки зрения порядка получения событий
- диаграмма развертывания (Deployment diagram) - структурная диаграмма, на которой показаны узлы и отношения между ними.



## Описание прецедентов. Диаграммы прецедентов - use case diagrams

Диаграммы прецедентов применяются для моделирования вида системы с точки зрения внешнего наблюдателя. На диаграмме прецедентов графически показана совокупность прецедентов и Субъектов, а также отношения между ними.

Диаграммы прецедентов частично описывает use case – прецедент использования проектируемой системы, давая частичное описание частичного применения системы с точки зрения условного внешнего обозревателя (за которым – в идеале - стоит согласованная точка зрения участников работ). При этом описание фокусируется на том, что должна делать система по отношению к своему внешнему окружению (периферии), а не то на том, как она эта делает.
Иначе говоря, диаграмма есть частичная спецификация. Напомним, в рассматриваемом подходе выделение основных (но не всех возможных) прецедентов на начальной стадии разработки играет ключевую роль, что отличает этот подход от чисто алгоритмического. При этом сначала обычно рассматриваются успешные сценарии (варианты).

Субъект (actor) - любая сущность, взаимодействующая с системой извне или множество логически связанных ролей, исполняемых при взаимодействии с прецедентами. Стандартным графическим обозначением субъекта на диаграммах является фигурка "человечка", под которой записывается конкретное имя субъекта, однако субъектом может быть не только человек, но и техническое устройств о, программа или любая другая система, которая может служить источником воздействия на моделируемую систему так, как определит сам разработчик.

Прецеденты (use case) - это описание множества последовательностей действий (включая их варианты), которые выполняются системой для того, чтобы актер получил результат, имеющий для него определенное значение. При этом ничего не говорится о том, каким образом будет реализовано взаимодействие субъектов с системой, это одна из важнейших особенностей разработки прецедентов. Стандартным графическим обозначением прецедента на диаграммах является эллипс, внутри которого содержится краткое название прецедента или имя в форме глагола с пояснительными словами.

Сущность концепции прецедентов подразумевает несколько важных пунктов.

Прецедент представляет собой завершенный фрагмент функциональных возможностей (включая основной поток логики управления, его любые вариации (подпотоки) и исключительные условия (альтернативные потоки)).
Фрагмент внешне наблюдаемых функций (отличных от внутренних функций).
Ортогональный фрагмент функциональных возможностей (прецеденты могут при выполнении совместно использовать объекты, но выполнение каждого прецедента независимо от других прецедентов).
Фрагмент функциональных возможностей, инициируемый субъектом. Будучи инициирован, прецедент может взаимодействовать с другими субъектоми. При этом возможно, что субъект окажется только на принимающем конце прецедента, опосредованно инициированного другим субъектом.
Фрагмент функциональных возможностей, который предоставляет субъекту ощутимый полезный результат (и этот результат достигается в пределах одного прецедента).
Между субъектами и прецедентами - основными компонентами диаграммы прецедентов - могут существовать различные отношения, которые описывают взаимодействие экземпляров одних субъектов и прецедентов с экземплярами других субъектов и прецедентов. В языке UML имеется несколько стандартных видов отношений между субъектами и прецедентами:

Отношение ассоциации (association) - определяет наличие канала связи между экземплярами субъекта и прецедента (или между экземплярами двумх субъектов). Обозначается сплошной линией, возможно наличие стрелки и указание мощности связи.

Отношение расширения (extend) - определяет взаимосвязь экземпляров отдельного прецедента с более общим прецедентом, свойства которого определяются на основе способа совместного объединения данных экземпляров. Обозначается пунктирной линией со стрелкой, направленной от того прецедента, который является расширением для исходного прецедента, и помечается ключевым словом "extend" ("расширяет").

Отношение включения (include) - указывает, что некоторое заданное поведение для одного прецедента включает в качестве составного компонента поведение другого прецедента. Данное отношение является направленным бинарным отношением в том смысле, что пара экземпляров прецедентов всегда упорядочена в отношении включения. Обозначается пунктирной линией со стрелкой, направленной от базового прецедента к включаемому, и помечается ключевым словом "include" ("включает").

Отношение обобщения (generalization) - служит для указания того факта, что некоторый прецедент А может быть обобщен до прецедента В. В этом случае прецедент А будет являться специализацией прецедента В. При этом В называется предком или родителем по отношению к А, а прецедент А - потомком по отношению к прецеденту В. Следует подчеркнуть, что потомок наследует все свойства и поведение своего родителя, а также может быть дополнен новыми свойствами и особенностями поведения. Графически данное отношение обозначается сплошной линией со стрелкой в форме незакрашенного треугольника, которая указывает на родительский прецедент.

## Пример использования
Прецеденты – это технология определения функциональных требований к системе. Работа прецедентов заключается в описании типичных взаимодействий между пользователями системы и самой системой и предоставлении описания процесса ее функционирования. Вместо того чтобы описывать прецеденты в лоб, я предпочитаю подкрасться к ним сзади и начать с описания сценариев. Сценарий (scenario) – это последовательность шагов, описывающих взаимодействие пользователя и системы. Поэтому при наличии онлайнового магазина, основанного на веб-сайте, мы можем использовать сценарий «Покупка товара» (Buy a Product), в котором происходит следующее.

``Покупатель просматривает каталог и помещает выбранные товары в корзину. При желании оплатить покупку он вводит информацию о кредитной карте и производит платеж. Система проверя ет авторизацию кредитной карты и подтверждает оплату товара тотчас же и по электронной почте.``

Подобный сценарий описывает только одну ситуацию, которая может иметь место. Однако если авторизация кредитной карты окажется неудачной, то подобная ситуация может послужить предметом уже другого сценария. В другом случае у вас может быть постоянный клиент, для которого проверка информации о покупке и кредитной карте не обязательна, и это будет третий сценарий.

Так или иначе, но все эти сценарии похожи. Суть в том, что во всех трех сценариях у пользователя одна и та же цель: купить товар. Пользователь не всегда может это сделать, но цель остается. Именно цель пользователя является ключом к прецедентам: прецедент представляет собой множество сценариев, объединенных некоторой общей целью пользователя.

В терминах прецедента пользователи называются актерами. Актер (actor) представляет собой некую роль, которую пользователь играет по отношению к системе. Актерами могут быть пользователь, торговый представитель пользователя, менеджер по продажам и товаровед.

Актеры действуют в рамках прецедентов. Один актер может выполнять несколько прецедентов; и наоборот, в соответствии с одним прецедентом могут действовать несколько актеров. Обычно клиентов много, поэтому роль клиента могут играть многие люди. К тому же один человек может играть несколько ролей, например менеджер по продажам, выполняющий роль торгового представителя клиента. Актер не обязательно должен быть человеком. Если система предоставляет некоторый сервис другой компьютерной системе, то другая система является актером.

Прецеденты считаются важной частью языка UML. Однако удивительно то, что определение прецедентов в UML довольно скудное. В UML ничего не говорится о том, как определять содержимое прецедента.
Все, что описано в UML, – это диаграмма прецедентов, которая показывает, как прецеденты связаны друг с другом. Но почти вся ценность прецедентов как раз в их содержании, а диаграмма имеет ограниченное значение.

## Содержимое прецедентов
Не существует стандартного способа описания содержимого прецедента; в разных случаях применяются различные форматы. На рисуне показан общий стиль использования. Вы начинаете с выбора одного из сценариев в качестве главного успешного сценария (main success scenario). Сначала вы описываете тело прецедента, в котором главный успешный сценарий представлен последовательностью нумерованных шагов. Затем берете другой сценарий и вставляете его в виде расширения (extension), описывая его в терминах изменений главного успешного сценария. Расширения могут быть успешными – пользователь достиг своей цели, как в варианте 3a, или неудачными, как в варианте 6a.

В каждом прецеденте есть ведущий актер, который посылает системе запрос на обслуживание. Ведущий актер – это актер, желание которого пытается удовлетворить прецедент и который обычно, но не всегда, является инициатором прецедента. Одновременно могут быть и другие актеры, с которыми система также взаимодействует во время выполнения прецедента. Они называются второстепенными актерами.

Каждый шаг в прецеденте – это элемент взаимодействия актера с системой. Каждый шаг должен быть простым утверждением и должен четко указывать, кто выполняет этот шаг. Шаг должен показывать намерение актера, а не механику его действий. Следовательно, в прецеденте интерфейс актера не описывается. Действительно, составление прецедента обычно предшествует разработке интерфейса пользователя.

## Спецификация вариантов использования (прецедентов)

https://glebradchenko.susu.ru/courses/bachelor/engineering/2013/SUSU_SE_08_UML_UseCase.pdf

https://studfile.net/preview/1712530/page:4/

Дальнейшее развитие модели поведения системы предполагает описание прецедентов. Типичное описание содержит следующие разделы:

* Имя прецедента
* Идентификатор прецедента (встречается не всегда)
* Краткое описание;
* Участвующие субъекты (акторы, иногда разделяются на основных и второстепенных);
* Предусловия, необходимые для инициирования прецедента;
* Основной поток событий;
* Альтернативный поток событий;
* Постусловия, определяющие состояние системы, по достижении которого прецедент завершается.

**Основной поток** описывает «идеальный» ход развития событий в прецеденте.

**Альтернативные потоки** могут перехватывать ошибки, ответвления и прерывания основного потока.

Основной поток *всегда начинается с действий главного актера*, направленных на инициацию прецедента.

## Запись основного потока

* Удачным способом начала потока можно считать следующую форму записи:

    `Прецедент начинается, когда <актер> <действие>.`

    Например, `Прецедент начинается, когда покупатель выбирает товар`

* Каждый этап потока прецедента должен быть выражен в следующей форме:

    `<номер> <ктолибо> <совершает некоторое действие>.`

* Альтернативные потоки могут быть заменены с помощью ключевого слова **Если**

    ```
    1. Прецедент начинается, когда Покупатель выбирает товар
    2. Если Покупатель выбирает товар у которого есть дополнительные товары
        2.1 Менеджер предлагает дополнительные товары
    3. Если Покупатель выбирает товар которого нет в наличии
        3.1 Менеджер предлагает оформить заказ
    ```

* Альтернативные потоки могут не возвращаться в основной поток после
выполнения, т.к. обрабатывают ошибки, исключительные ситуации и т.п.

* Для алтернативных потоков оформляется отдельная спецификация. Структура аналогична основной, только идентификатор следующего уровня (например, если у основного потока ID 2., то у альтернативного 2.1)

В итоге должна получиться таблица (правая колонка, слева описание):

&nbsp; | &nbsp;
--|------ 
*Имя прецедента* | Прецедент: Выбор товара
*Идентификатор прецедента* | ID 1
*Краткое описание* | Краткое описание<br/>Покупатель выбирает товар в магазине автосервиса
*Акторы, вовлеченные в прецедент* | Главные акторы:<br/>Покупатель<br/>Второстепенные акторы:<br/>Менеджер
*Состояние системы на начало прецедента* | Предусловия:<br/>нет
*Фактические этапы прецедента* | Основной поток:<br/>1. Прецедент начинается, когда Покупатель выбирает товар<br/>2. Если Покупатель выбирает товар у которого есть дополнительные товары<br/>&nbsp;&nbsp;&nbsp;&nbsp;2.1 Менеджер предлагает дополнительные товары<br/> 3. Если Покупатель выбирает товар которого нет в наличии<br/>&nbsp;&nbsp;&nbsp;&nbsp;3.1 Менеджер предлагает оформить заказ
*Альтернативные потоки* | Альтернативные потоки:<br/>2.1 Менеджер предлагает дополнительные товары<br/>3.1 Менеджер предлагает оформить заказ
*Состояние системы после окончания прецедента* | Постусловия<br/>1. Покупатель выбрал товар<br/>2. Покупатель отказался от покупки 


&nbsp; | &nbsp;
-|------ 
Прецедент | Оформление заказа
Идентификатор | ID 2
Краткое описание | Покупатель оформляет заказ на товар, которого нет в наличии
Главные акторы | Покупатель
Второстепенные акторы | Менеджер
Предусловия | Покупатель выбрал товар
Основной поток | 1. Прецедент начинается, когда Покупатель оформляет заказ<br/>2. Менеджер принимает заказ
Альтернативные потоки | нет
Постусловия | 1. Покупатель оставил заказ

![Пример текста прецедета](https://www.planerka.info/img/Diagramma-precedentov-(variantov-ispolzovaniya)-UML_000004.jpg)

[Диаграмма вариантов использования (прецедентов) (use case diagram)](http://imlearning.ru/netcat_files/file/FSIS/%D0%A4%D0%A1%D0%98%D0%A1_%D1%81%D0%B5%D0%BC%D0%B8%D0%BD%D0%B0%D1%80-2_%D0%94%D0%B8%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B-%D0%B2%D0%B0%D1%80%D0%B8%D0%B0%D0%BD%D1%82%D0%BE%D0%B2-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F.pdf)

[Основы UML — диаграммы использования (use-case)](https://pro-prof.com/archives/2594?ysclid=l959uvirgs514755598)
